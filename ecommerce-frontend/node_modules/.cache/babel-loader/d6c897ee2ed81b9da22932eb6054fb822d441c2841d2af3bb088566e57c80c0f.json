{"ast":null,"code":"import _slicedToArray from\"C:/Users/kandw/Desktop/Ecommerce/ecommerce-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./CartPage.css';import{useSelector}from'react-redux';import{Row,Alert,Container,Col,Table}from'react-bootstrap';import{useDecreaseCartProductMutation,useIncreaseCartProductMutation,useRemoveFromCartMutation}from'../services/appApi';import{loadStripe}from'@stripe/stripe-js';import{Elements}from'@stripe/react-stripe-js';import CheckoutForm from'../components/CheckoutForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51N5OJrSCMJ09MRJvvS0lpi1Bjug4kafWvYNHZMMaBksHMOwUgfKRjo6rBBiYkXwlIBdXXb7yLWDzmIXgrsKkVSow00BnCovcSX\");function CartPage(){var user=useSelector(function(state){return state.user;});var products=useSelector(function(state){return state.products;});var userCartObj=user.cart;// console.log(products);\n// console.log(userCartObj);\nvar _useIncreaseCartProdu=useIncreaseCartProductMutation(),_useIncreaseCartProdu2=_slicedToArray(_useIncreaseCartProdu,1),increaseCart=_useIncreaseCartProdu2[0];var _useDecreaseCartProdu=useDecreaseCartProductMutation(),_useDecreaseCartProdu2=_slicedToArray(_useDecreaseCartProdu,1),decreaseCart=_useDecreaseCartProdu2[0];var _useRemoveFromCartMut=useRemoveFromCartMutation(),_useRemoveFromCartMut2=_slicedToArray(_useRemoveFromCartMut,2),removeFromCart=_useRemoveFromCartMut2[0],isLoading=_useRemoveFromCartMut2[1].isLoading;function handleDecrease(product){var quantity=user.cart[product.productId];if(quantity<=0)return alert(\"Can't proceed\");decreaseCart(product);}var cart=products.filter(function(product){return userCartObj[product._id]!=null;});console.log(user);return/*#__PURE__*/_jsx(Container,{style:{minHeight:'95vh'},className:\"cart-container\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-2 h3\",children:\"Shopping cart\"}),cart.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Shopping cart is empty. Add products to your cart\"}):/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})]}),cart.length>0&&/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"cart-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\xA0\"}),/*#__PURE__*/_jsxs(\"td\",{children:[!isLoading&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\",style:{marginRight:10,cursor:\"pointer\"},onClick:function onClick(){return removeFromCart({userId:user._id,productId:item._id,price:item.price});}}),/*#__PURE__*/_jsx(\"img\",{src:item.pictures[0].url,style:{width:100,height:100,objectFit:\"cover\"}})]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"quantity-indicator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-minus-circle\",onClick:function onClick(){return handleDecrease({productId:item._id,price:item.price,userId:user._id});}}),/*#__PURE__*/_jsx(\"span\",{children:user.cart[item._id]}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus-circle\",onClick:function onClick(){return increaseCart({productId:item._id,price:item.price,userId:user._id});}})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price*user.cart[item._id]]})]});})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"h4 pt-4\",children:[\"Total: $\",user.cart.total]})})]})})]})});}export default CartPage;","map":{"version":3,"names":["React","useState","useSelector","Row","Alert","Container","Col","Table","useDecreaseCartProductMutation","useIncreaseCartProductMutation","useRemoveFromCartMutation","loadStripe","Elements","CheckoutForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","stripePromise","CartPage","user","state","products","userCartObj","cart","_useIncreaseCartProdu","_useIncreaseCartProdu2","_slicedToArray","increaseCart","_useDecreaseCartProdu","_useDecreaseCartProdu2","decreaseCart","_useRemoveFromCartMut","_useRemoveFromCartMut2","removeFromCart","isLoading","handleDecrease","product","quantity","productId","alert","filter","_id","console","log","style","minHeight","className","children","length","variant","stripe","md","responsive","map","item","marginRight","cursor","onClick","userId","price","src","pictures","url","width","height","objectFit","total"],"sources":["C:/Users/kandw/Desktop/Ecommerce/ecommerce-frontend/src/pages/CartPage.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport './CartPage.css'\r\nimport { useSelector } from 'react-redux'\r\nimport { Row,Alert,Container,Col,Table } from 'react-bootstrap';\r\nimport { useDecreaseCartProductMutation, useIncreaseCartProductMutation, useRemoveFromCartMutation } from '../services/appApi';\r\nimport {loadStripe} from '@stripe/stripe-js';\r\nimport {Elements} from '@stripe/react-stripe-js';\r\nimport CheckoutForm from '../components/CheckoutForm';\r\n\r\nconst stripePromise=loadStripe(\"pk_test_51N5OJrSCMJ09MRJvvS0lpi1Bjug4kafWvYNHZMMaBksHMOwUgfKRjo6rBBiYkXwlIBdXXb7yLWDzmIXgrsKkVSow00BnCovcSX\");\r\n\r\n\r\n\r\nfunction CartPage() {\r\n    const user=useSelector(state=>state.user);\r\n    const products=useSelector(state=>state.products);\r\n    const userCartObj=user.cart;\r\n    // console.log(products);\r\n    // console.log(userCartObj);\r\n    const [increaseCart]=useIncreaseCartProductMutation();\r\n    const [decreaseCart]=useDecreaseCartProductMutation();\r\n    const [removeFromCart,{isLoading}]=useRemoveFromCartMutation();\r\n\r\n    function handleDecrease(product){\r\n      const quantity=user.cart[product.productId];\r\n      if(quantity<=0) return alert(\"Can't proceed\");\r\n      decreaseCart(product);\r\n    }\r\n\r\n    let cart=products.filter((product)=>userCartObj[product._id]!=null);\r\n    console.log(user);\r\n  return <Container style={{minHeight:'95vh'}} className=\"cart-container\">\r\n    <Row>\r\n        <Col>\r\n        <h1 className='pt-2 h3'>Shopping cart</h1>\r\n        {cart.length===0?(\r\n            <Alert variant='info'>Shopping cart is empty. Add products to your cart</Alert>\r\n        ): <Elements stripe={stripePromise}>\r\n          <CheckoutForm />\r\n        </Elements> }\r\n        </Col>\r\n       \r\n          {cart.length>0 && (\r\n             <Col md={5}>\r\n            <>\r\n              <Table responsive=\"sm\" className=\"cart-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>&nbsp;</th>\r\n                    <th>Product</th>\r\n                    <th>Price</th>\r\n                    <th>Quantity</th>\r\n                    <th>Subtotal</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {cart.map(item=>(\r\n                    <tr>\r\n                      <td>&nbsp;</td>\r\n                      <td>\r\n                        {!isLoading && <i className='fa fa-times' style={{marginRight:10,cursor:\"pointer\"}} onClick={()=>removeFromCart({userId:user._id,productId:item._id,price:item.price})}></i> }\r\n                        <img src={item.pictures[0].url} style={{width:100,height:100,objectFit:\"cover\"}} />\r\n                      </td>\r\n                      <td>\r\n                        ${item.price}\r\n                      </td>\r\n                      <td>\r\n                        <span className='quantity-indicator'>\r\n                          <i className='fa fa-minus-circle' onClick={()=>handleDecrease({productId:item._id,price:item.price,userId:user._id})}></i>\r\n                          <span>{user.cart[item._id]}</span>\r\n                          <i className='fa fa-plus-circle' onClick={()=>increaseCart({productId:item._id,price:item.price,userId:user._id})}></i>\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        ${item.price*user.cart[item._id]}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n              <div>\r\n                <h3 className='h4 pt-4'>Total: ${user.cart.total}</h3>\r\n              </div>\r\n            </>\r\n        </Col>\r\n          )}\r\n    </Row>\r\n  </Container>\r\n}\r\n\r\nexport default CartPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}