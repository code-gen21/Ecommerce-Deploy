{"ast":null,"code":"import _objectSpread from\"C:/Users/kandw/Desktop/Ecommerce/ecommerce-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/kandw/Desktop/Ecommerce/ecommerce-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'../axios';import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import Loading from'../components/Loading';import SimilarProduct from'../components/SimilarProduct';import{Container,Row,Col,Badge,ButtonGroup,Form,Button}from'react-bootstrap';import AliceCarousel from'react-alice-carousel';import'react-alice-carousel/lib/alice-carousel.css';import{useParams}from'react-router-dom';import'./ProductPage.css';import{LinkContainer}from'react-router-bootstrap';import{useAddToCartMutation}from'../services/appApi';import ToastMessage from'../components/ToastMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){var _useParams=useParams(),id=_useParams.id;var user=useSelector(function(state){return state.user;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),similar=_useState4[0],setSimilar=_useState4[1];var _useAddToCartMutation=useAddToCartMutation(),_useAddToCartMutation2=_slicedToArray(_useAddToCartMutation,2),addToCart=_useAddToCartMutation2[0],isSuccess=_useAddToCartMutation2[1].isSuccess;var handleDragStart=function handleDragStart(e){e.preventDefault();};useEffect(function(){axios.get(\"/products/\".concat(id)).then(function(_ref){var data=_ref.data;setProduct(data.product);setSimilar(data.similar);});},[id]);if(!product){return/*#__PURE__*/_jsx(Loading,{});}var responsive={0:{items:1},568:{items:2},1024:{items:3}};var images=product.pictures.map(function(picture){return/*#__PURE__*/_jsx(\"img\",{className:\"product__carousel--image\",src:picture.url,onDragStart:handleDragStart});});var similarProducts=[];if(similar){similarProducts=similar.map(function(product,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",\"data-value\":idx,children:/*#__PURE__*/_jsx(SimilarProduct,_objectSpread({},product))});});}return/*#__PURE__*/_jsxs(Container,{className:\"pt-4\",style:{position:'relative'},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:6,children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:images,controlsStrategy:\"alternate\"})}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"pt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"primary\",children:product.category})}),/*#__PURE__*/_jsxs(\"p\",{className:\"product__price\",children:[\"$\",product.price,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:'justify'},className:\"py-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",product.description]}),user&&!user.isAdmin&&/*#__PURE__*/_jsxs(ButtonGroup,{style:{width:'90%'},children:[/*#__PURE__*/_jsxs(Form.Select,{size:\"lg\",style:{width:'40%',borderRadius:\"0\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(Button,{size:\"lg\",onClick:function onClick(e){return addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url});},children:\"Add to cart\"})]}),user&&user.isAdmin&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Edit Product\"})}),isSuccess&&/*#__PURE__*/_jsx(ToastMessage,{bg:\"info\",title:\"Added to cart\",body:\"\".concat(product.name,\" is in your cart\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Similar Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center flex-wrap\",children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:similarProducts,responsive:responsive,controlsStrategy:\"alternate\"})})]})]});}export default ProductPage;","map":{"version":3,"names":["axios","React","useState","useEffect","useSelector","Loading","SimilarProduct","Container","Row","Col","Badge","ButtonGroup","Form","Button","AliceCarousel","useParams","LinkContainer","useAddToCartMutation","ToastMessage","jsx","_jsx","jsxs","_jsxs","ProductPage","_useParams","id","user","state","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","similar","setSimilar","_useAddToCartMutation","_useAddToCartMutation2","addToCart","isSuccess","handleDragStart","e","preventDefault","get","concat","then","_ref","data","responsive","items","images","pictures","map","picture","className","src","url","onDragStart","similarProducts","idx","children","_objectSpread","style","position","lg","mouseTracking","controlsStrategy","name","bg","category","price","textAlign","description","isAdmin","width","Select","size","borderRadius","value","onClick","userId","_id","productId","image","to","title","body"],"sources":["C:/Users/kandw/Desktop/Ecommerce/ecommerce-frontend/src/pages/ProductPage.js"],"sourcesContent":["import axios from '../axios';\r\nimport React, { useState,useEffect } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport Loading from '../components/Loading';\r\nimport SimilarProduct from '../components/SimilarProduct';\r\nimport { Container,Row,Col,Badge, ButtonGroup,Form, Button } from 'react-bootstrap';\r\nimport AliceCarousel from 'react-alice-carousel';\r\nimport 'react-alice-carousel/lib/alice-carousel.css'\r\nimport { useParams } from 'react-router-dom';\r\nimport './ProductPage.css'; \r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useAddToCartMutation } from '../services/appApi';\r\nimport ToastMessage from '../components/ToastMessage';\r\n\r\nfunction ProductPage() {\r\n    const {id}=useParams();\r\n    const user=useSelector(state=>state.user);\r\n    const [product,setProduct]=useState(null);\r\n    const [similar,setSimilar]=useState(null);\r\n    const [addToCart,{isSuccess}]=useAddToCartMutation();\r\n\r\n    const handleDragStart=(e)=>{\r\n        e.preventDefault();\r\n    }\r\n\r\n    useEffect(()=>{\r\n        axios.get(`/products/${id}`).then(({data})=>{\r\n            setProduct(data.product);\r\n            setSimilar(data.similar);\r\n        })\r\n    },[id])\r\n    if(!product){\r\n        return <Loading />\r\n    }\r\n\r\n    const responsive={\r\n        0:{items:1},\r\n        568:{items:2},\r\n        1024:{items:3},\r\n    }\r\n\r\n    const images=product.pictures.map((picture)=> <img className='product__carousel--image' src={picture.url} onDragStart={handleDragStart} />)\r\n    \r\n\r\n    let similarProducts=[];\r\n    if(similar){\r\n        similarProducts=similar.map((product,idx)=>{\r\n            return <div className='item' data-value={idx}><SimilarProduct {...product} /></div>\r\n        })\r\n    }\r\n\r\n  return (\r\n    <Container className=\"pt-4\" style={{position:'relative'}}>\r\n        <Row>\r\n            <Col lg={6}>\r\n                <AliceCarousel mouseTracking items={images} controlsStrategy=\"alternate\" />\r\n            </Col>\r\n            <Col lg={6} className=\"pt-4\">\r\n                <h1>{product.name}</h1>\r\n                <p><Badge bg=\"primary\">{product.category}</Badge></p>\r\n                <p className='product__price'>${product.price} </p>\r\n                <p  style={{textAlign:'justify'}} className='py-3'>\r\n                    <strong>Description:</strong> {product.description}\r\n                </p>\r\n                {user && !user.isAdmin && (\r\n                    <ButtonGroup style={{width:'90%'}}>\r\n                        <Form.Select size=\"lg\" style={{width:'40%',borderRadius:\"0\"}}>\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option>\r\n                            <option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </Form.Select>\r\n                        <Button size=\"lg\" onClick={(e)=>addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url})}>\r\n                            Add to cart\r\n                        </Button>\r\n                    </ButtonGroup>\r\n                )}\r\n                {user && user.isAdmin && (\r\n                    <LinkContainer to={`/product/${product._id}/edit`}>\r\n                        <Button size=\"lg\">Edit Product</Button>\r\n                    </LinkContainer>\r\n                )}\r\n                {isSuccess && <ToastMessage bg=\"info\" title=\"Added to cart\" body={`${product.name} is in your cart`} />}\r\n            </Col>\r\n        </Row>\r\n        <div className='my-4'>\r\n            <h2>Similar Products</h2>\r\n            <div className='d-flex justify-content-center align-items-center flex-wrap'>\r\n                <AliceCarousel mouseTracking items={similarProducts} responsive={responsive} controlsStrategy='alternate' />\r\n            </div>\r\n        </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default ProductPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}